<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–µ–Ω—é –∏–≥—Ä—ã</title>
  <link rel="stylesheet" href="menu.css" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0078D7" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
</head>

<body>

  <div class="menu-container">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!</h1>
    <p id="welcomeMessage" style="display: none;">üëã –ü—Ä–∏–≤–µ—Ç, <span id="userName"></span>!</p>
    <nav class="menu-buttons">
      <button id="loginBtn" class="neon-button">–í–æ–π—Ç–∏</button>
      <button id="logoutBtn" class="neon-button" style="display: none;">–í—ã–π—Ç–∏</button>
      <button id="startGameBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
      <button id="settingsBtn">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      <button id="shopBtn">–ú–∞–≥–∞–∑–∏–Ω</button>
    </nav>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ FAQ —Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ -->
  <button id="faqBtn" title="FAQ">FAQ</button>

  <div id="tip" class="tip-container"></div>

  <div id="updatePopup" class="update-popup">
    <h2>üÜï –ù–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</h2>
    <h3>–í–µ—Ä—Å–∏—è 1.2 Alpha</h3>
    <ul>
      <li>–î–æ–±–∞–≤–ª–µ–Ω –ü—Ä–æ—Ñ–∏–ª—å!</li>
      <li>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å —Å–∏–Ω–∏–º –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–æ–º –Ω–∞ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–∞—Ö!</li>
      <li>–î–æ–±–∞–≤–ª–µ–Ω –º–∞–≥–∞–∑–∏–Ω!</li>
      <li>–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω–∏—Ç—å –Ω–∏–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ - –≤ –º–∞–≥–∞–∑–∏–Ω–µ!</li>
      <li>–ú–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω—è!</li>
    </ul>
  </div>

  <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
  <div id="notification" class="tip-container" style="display: none;"></div>

  <script>
    // Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    const firebaseConfig = {
      apiKey: "AIzaSyAOqsclFbwauR4XyadH1TNJys149Mx7tHI",
      authDomain: "lesorub-e022b.firebaseapp.com",
      databaseURL: "https://lesorub-e022b-default-rtdb.firebaseio.com",
      projectId: "lesorub-e022b",
      storageBucket: "lesorub-e022b.appspot.com",
      messagingSenderId: "634001284128",
      appId: "1:634001284128:web:3002d6d0bc1338ff1c7045"
    };
    firebase.initializeApp(firebaseConfig);

    const loginBtn = document.getElementById('loginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const startGameBtn = document.getElementById('startGameBtn');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const userNameSpan = document.getElementById('userName');
    const notification = document.getElementById('notification');

    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        loginBtn.style.display = 'none';
        logoutBtn.style.display = 'inline-block';
        welcomeMessage.style.display = 'block';
        userNameSpan.textContent = user.displayName || user.email;
      } else {
        loginBtn.style.display = 'inline-block';
        logoutBtn.style.display = 'none';
        welcomeMessage.style.display = 'none';
        userNameSpan.textContent = '';
      }
    });

    loginBtn.addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider).catch(err => {
        console.error("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:", err);
      });
    });

    logoutBtn.addEventListener('click', () => {
      firebase.auth().signOut().catch(err => {
        console.error("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:", err);
      });
    });

    startGameBtn.addEventListener('click', () => {
      const user = firebase.auth().currentUser;
      if (user) {
        window.location.href = 'index.html'; // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –≤–∞—à—É –∏–≥—Ä–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
      } else {
        showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–æ—à–µ–ª –≤ –∞–∫–∫–∞—É–Ω—Ç!');
      }
    });

    document.getElementById('faqBtn').addEventListener('click', () => {
      window.location.href = 'faq.html';
    });

    function showNotification(message) {
      notification.textContent = message;
      notification.style.display = 'block';
      setTimeout(() => {
        notification.style.display = 'none';
      }, 3000);
    }
  </script>

  <script src="menu.js"></script>
</body>
</html>
